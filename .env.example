# Vercel Configuration
# VERCEL_OIDC_TOKEN is automatically set by Vercel CLI (`vercel env pull`)
# This token is used for Vercel-specific integrations and authentication
VERCEL_OIDC_TOKEN=your-vercel-oidc-token

# Supabase Configuration
# Get these values from https://app.supabase.com/project/_/settings/api
NEXT_PUBLIC_SUPABASE_URL=your-project-url.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
SUPABASE_SECRET_KEY=your-supabase-secret-key
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# Email Configuration (Resend)
# Get your API key from https://resend.com/api-keys
RESEND_API_KEY=re_your_resend_api_key
EMAIL_FROM=noreply@yourdomain.com

# Stripe Configuration
# Get these values from https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_from_stripe_cli
STRIPE_TEST_PRICE_ID=price_your_test_price_id

# MCP Server Configuration
# Comma-separated list of allowed origins for MCP connections (DNS rebinding protection)
MCP_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# Expected Host header value for DNS rebinding protection
# In production, set this to your domain (e.g., yourdomain.com)
MCP_EXPECTED_HOST=localhost:3000

# Redis/KV Configuration for MCP Session Management
# Vercel KV - automatically set in Vercel production environment
# For local development with Vercel KV, use `vercel env pull .env.local`
# Get this from: https://vercel.com/docs/storage/vercel-kv
KV_REST_API_URL=https://your-kv-instance.upstash.io
KV_REST_API_TOKEN=your-token-here
KV_REST_API_READ_ONLY_TOKEN=your-read-only-token-here
KV_URL=rediss://default:your-token@your-kv-instance.upstash.io:6379
REDIS_URL=rediss://default:your-token@your-kv-instance.upstash.io:6379

# Alternative: Use local Redis for development (comment out Vercel KV variables above)
# KV_URL=redis://localhost:6379
# REDIS_URL=redis://localhost:6379

# MCP Session TTL (Time To Live) in seconds
# Default: 86400 (24 hours)
SESSION_TTL_SECONDS=86400

# Extend session TTL when remaining time is below this threshold (seconds)
# Default: 3600 (1 hour)
SESSION_EXTENSION_THRESHOLD_SECONDS=3600

# Batch size for session cleanup scans
# Default: 100
SESSION_CLEANUP_BATCH_SIZE=100

# Enable session metrics collection
# Default: true
METRICS_ENABLED=true

# Metrics retention window (days)
# Default: 90
METRICS_RETENTION_DAYS=90

# Vercel Cron authentication secret for cleanup and aggregation endpoints
CRON_SECRET=your-cron-secret

# MCP Rate Limiting Configuration
# IP-based rate limit (requests per minute) - applied before authentication
# Default: 20
MCP_IP_RATE_LIMIT=20

# User-based rate limit (requests per minute) - applied after authentication
# Default: 100
MCP_USER_RATE_LIMIT=100

# OAuth 2.1 Authorization Server Configuration
# ⚠️ IMPORTANT: OAuth 2.1 is PRODUCTION-ONLY ⚠️
# These settings are for production Supabase instances only.
# Local Supabase CLI does not support OAuth 2.1 server functionality.
#
# For local development, use service role key authentication instead.
# See README.md for local development setup instructions.

# MCP Server URL - used as the JWT audience for token validation
# Production: https://yourdomain.com
# Local: Not applicable (OAuth 2.1 not available locally)
MCP_SERVER_URL=http://localhost:3000

# JWT Issuer - the Supabase URL that issues OAuth tokens
# Production: https://your-project-ref.supabase.co
# Local: Not applicable (OAuth 2.1 not available locally)
JWT_ISSUER=your-project-url.supabase.co

# JWT Audience - the intended recipient of the JWT tokens
# Production: https://yourdomain.com
# Local: Not applicable (OAuth 2.1 not available locally)
JWT_AUDIENCE=http://localhost:3000

# OAuth 2.1 Endpoints (PRODUCTION ONLY - auto-configured by Supabase)
# Authorization Server Metadata: {SUPABASE_URL}/.well-known/oauth-authorization-server
# JWKS (Public Keys): {SUPABASE_URL}/.well-known/jwks.json
# Authorization Endpoint: {SUPABASE_URL}/oauth/authorize
# Token Endpoint: {SUPABASE_URL}/oauth/token
# Dynamic Client Registration: {SUPABASE_URL}/oauth/register

# OAuth Scopes for MCP (PRODUCTION ONLY)
# Custom scopes should be configured in Production Supabase Dashboard → Authentication → OAuth Server
# Recommended scopes:
#   - mcp:execute: General MCP tool execution (required)
#   - mcp:read: Read-only MCP operations (optional)
#   - mcp:write: Write MCP operations (optional)

# Local Development Alternative: Service Role Key
# Use this for local development instead of OAuth 2.1
# SUPABASE_SERVICE_ROLE_KEY=your-local-service-role-key

